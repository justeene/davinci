(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0b6a5fce95cc6be643c8":function(e,t,a){var n=a("5c18ffe6ab9c49825de0");"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("81325eb2f60ee91338da")(n,r);n.locals&&(e.exports=n.locals)},"4b0292d7b53685ef0bd5":function(e,t,a){(t=e.exports=a("3b6ab024654c420ec43b")(!1)).push([e.i,"._2xLBVuHZjmn6F5VkAxyxZa{padding:8px}._2xLBVuHZjmn6F5VkAxyxZa ._3iXhC71pUfECXfqf44b2EV{min-height:40px}._2346_F9E7vB9mc5ocIZVbi{width:28px}._20lbb_POB2WlxojsuP1Lsx{width:100%}",""]),t.locals={rows:"_2xLBVuHZjmn6F5VkAxyxZa",rowBlock:"_3iXhC71pUfECXfqf44b2EV",color:"_2346_F9E7vB9mc5ocIZVbi",colControl:"_20lbb_POB2WlxojsuP1Lsx"}},"5c18ffe6ab9c49825de0":function(e,t,a){(t=e.exports=a("3b6ab024654c420ec43b")(!1)).push([e.i,"._1RAdf8108_E89K4FhzQ-Qr{width:80px}.FayDDxA_NYYmuxHHeOQlL i{margin-left:8px}.FayDDxA_NYYmuxHHeOQlL i:hover{cursor:pointer}.CcNpEc68iQdNMuIvhfYen{max-height:600px;overflow-y:scroll}",""]),t.locals={tableInput:"_1RAdf8108_E89K4FhzQ-Qr",tableEditCell:"FayDDxA_NYYmuxHHeOQlL",headerTable:"CcNpEc68iQdNMuIvhfYen"}},d7cf1b4945a97d9fb8a7:function(e,t,a){var n=a("4b0292d7b53685ef0bd5");"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("81325eb2f60ee91338da")(n,r);n.locals&&(e.exports=n.locals)},f593cab48525cf136650:function(e,t,a){"use strict";a.r(t);a("b6baf0d2e54bf2d3bff8");var n=a("a7b9c9a05ab912aef0f4"),r=a.n(n),o=(a("f47118a890da391b903a"),a("75ae1749529d4a462655")),c=a.n(o),l=(a("cf4e0c98ab358a5cd354"),a("59dbcd481b7e32523d90")),i=a.n(l),f=(a("b073ab6371cb899f99ac"),a("6a984067ff83f895dff5")),u=a.n(f),s=(a("78a635cd52024e799497"),a("b3250aed8113a4352611")),d=a.n(s),p=(a("cf46732e1acedbc1f20e"),a("3d0b3aaa7f310995a691")),m=a.n(p),y=(a("1f4ca8b96cc5ea0ddd19"),a("7c567bb0039fefd6f697")),b=a.n(y),g=(a("75f3da26be562fd834ba"),a("d8ecc77e11741cfad3a9")),h=a.n(g),v=(a("a0ab635ab85fb73b9492"),a("6f651be3c9933ea7c2c7")),C=a.n(v),E=(a("6b9292ab883d8f5afe82"),a("808d7c1559e96096896a")),k=a.n(E),w=(a("04d225eb2b6e0a61becd"),a("4aafa94a5eef63073f40")),x=a.n(w),S=a("246df9874efc20494c0b"),H=a.n(S),j=a("0d9e341897112a3de7da"),O=a.n(j),N=a("55c69f0ea731e712b8f3"),P=a("3bb731ebd40812aa4cb1"),_=a("39619bfaf8da2322503f"),I=a("a21591280e67f469f560"),A=a("0b6a5fce95cc6be643c8"),K=a.n(A),F=a("d7cf1b4945a97d9fb8a7"),B=a.n(F);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){T(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J=x.a.Group,W=k.a.Group,G=k.a.Button,U=H.a.createElement(G,{value:"flex-start"},"\u5de6\u5bf9\u9f50"),X=H.a.createElement(G,{value:"center"},"\u5c45\u4e2d"),q=H.a.createElement(G,{value:"flex-end"},"\u53f3\u5bf9\u9f50"),$=H.a.createElement(h.a,{type:"arrow-up"}),ee=H.a.createElement(h.a,{type:"arrow-down"}),te=H.a.createElement(m.a,{span:1},H.a.createElement(d.a,{type:"flex",justify:"end"},H.a.createElement(r.a,{title:"\u8868\u683c\u6570\u636e\u5217\u8bf7\u5728\u5916\u90e8\u62d6\u62fd\u4ee5\u66f4\u6539\u987a\u5e8f"},H.a.createElement(h.a,{type:"info-circle"})))),ae=function(e){function t(e){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=R(t).call(this,e),a=!r||"object"!==D(r)&&"function"!==typeof r?Y(n):r,T(Y(a),"headerNameInput",H.a.createRef()),T(Y(a),"moveUp",function(){var e=a.state,t=e.localConfig,n=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?C.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0a\u79fb\u7684\u5217"):(r.forEach(function(e){var a=n[e],r=a?a.children:t,o=r.findIndex(function(t){return t.key===e});if(!(o<1)){var c=r[o-1];r[o-1]=r[o],r[o]=c}}),a.setState({localConfig:L(t)}))}),T(Y(a),"moveDown",function(){var e=a.state,t=e.localConfig,n=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?C.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0b\u79fb\u7684\u5217"):(r.forEach(function(e){var a=n[e],r=a?a.children:t,o=r.findIndex(function(t){return t.key===e});if(!(o>=r.length-1)){var c=r[o];r[o]=r[o+1],r[o+1]=c}}),a.setState({localConfig:L(t)}))}),T(Y(a),"mergeColumns",function(){var e=a.state,t=e.localConfig,n=e.mapHeader,r=e.mapHeaderParent,o=e.currentSelectedKeys;if(o.length<=0)C.a.warning("\u8bf7\u52fe\u9009\u8981\u5408\u5e76\u7684\u5217");else{var c=[];if(o.forEach(function(e){for(var t=n[e];o.includes(t.key);){var a=r[t.key];if(!a)break;t=a}c.findIndex(function(e){return e.key===t.key})<0&&c.push(t)}),c.every(function(e){return!r[e.key]})){var l={key:Object(N.d)(5),headerName:"\u65b0\u5efa\u5408\u5e76\u5217",alias:null,visualType:null,isGroup:!0,style:Q({},P.a,{justifyContent:"center"}),children:c},i=t.length-c.length;i=c.reduce(function(e,a){return Math.min(e,t.findIndex(function(e){return e.key===a.key}))},i);var f=c.map(function(e){return e.key}),u=t.filter(function(e){return!f.includes(e.key)});u.splice(i,0,l);var s=z(a.getMapHeaderKeyAndConfig(u),2),d=s[0],p=s[1];a.setState({localConfig:u,mapHeader:d,mapHeaderParent:p,currentEditingConfig:l,currentSelectedKeys:[]},function(){a.headerNameInput.current.focus(),a.headerNameInput.current.select()})}else C.a.warning("\u52fe\u9009\u7684\u5217\u5e94\u662f\u5f53\u524d\u6700\u4e0a\u7ea7\u5217")}}),T(Y(a),"cancel",function(){a.props.onCancel()}),T(Y(a),"save",function(){a.props.onSave(a.state.localConfig)}),T(Y(a),"propChange",function(e,t){return function(n){var r=n.target?n.target.value:n,o=a.state.localConfig,c=e.key,l=function(e){var a=c===e.key;return a&&(e.style[t]=r),a};o.some(function(e){return a.traverseHeaderConfig(e,null,l)}),a.setState({localConfig:L(o)})}}),T(Y(a),"editHeaderName",function(e){return function(){a.state.localConfig.some(function(t){return a.traverseHeaderConfig(t,null,function(t){var n=t.key===e;return n&&a.setState({currentEditingConfig:t},function(){a.headerNameInput.current.focus(),a.headerNameInput.current.select()}),n})})}}),T(Y(a),"deleteHeader",function(e){return function(){var t=a.state,n=t.localConfig,r=(t.mapHeader,t.mapHeaderParent);n.some(function(t){return a.traverseHeaderConfig(t,null,function(t){var a=t.key===e;if(a){var o,c,l=r[t.key];if(l)o=l.children.findIndex(function(e){return e.key===t.key}),(c=l.children).splice.apply(c,[o,1].concat(L(t.children)));else o=n.findIndex(function(e){return e.key===t.key}),n.splice.apply(n,[o,1].concat(L(t.children)))}return a})});var o=z(a.getMapHeaderKeyAndConfig(n),2),c=o[0],l=o[1];a.setState({mapHeader:c,mapHeaderParent:l,localConfig:n})}}),T(Y(a),"saveEditingHeaderName",function(e){var t=e.target.value;if(t){var n=a.state,r=n.localConfig,o=n.currentEditingConfig;r.some(function(e){return a.traverseHeaderConfig(e,null,function(e){var a=e.key===o.key;return a&&(e.headerName=t),a})}),a.setState({localConfig:L(r),currentEditingConfig:null})}else C.a.warning("\u8bf7\u8f93\u5165\u548c\u5e76\u5217\u540d\u79f0")}),T(Y(a),"columns",[{title:"\u8868\u683c\u5217",dataIndex:"headerName",key:"headerName",render:function(e,t){var n=a.state.currentEditingConfig,r=t.key,o=t.headerName,c=t.alias,l=t.isGroup;if(!n||n.key!==r)return l?H.a.createElement("span",{className:K.a.tableEditCell},H.a.createElement("label",null,c||o),H.a.createElement(h.a,{type:"edit",onClick:a.editHeaderName(r)}),H.a.createElement(h.a,{type:"delete",onClick:a.deleteHeader(r)})):H.a.createElement("label",null,c||o);var i=n.headerName;return H.a.createElement(b.a,{ref:a.headerNameInput,className:K.a.tableInput,defaultValue:i,onPressEnter:a.saveEditingHeaderName})}},{title:"\u80cc\u666f\u8272",dataIndex:"backgroundColor",key:"backgroundColor",width:60,render:function(e,t){var n=t.style.backgroundColor;return H.a.createElement(d.a,{type:"flex",justify:"center"},H.a.createElement(m.a,null,H.a.createElement(_.a,{className:B.a.color,value:n,onChange:a.propChange(t,"backgroundColor")})))}},{title:"\u5b57\u4f53",dataIndex:"font",key:"font",width:285,render:function(e,t){var n=t.style,r=n.fontSize,o=n.fontFamily,c=n.fontColor,l=n.fontStyle,i=n.fontWeight;return H.a.createElement(H.a.Fragment,null,H.a.createElement(d.a,{gutter:8,type:"flex",align:"middle",className:B.a.rowBlock},H.a.createElement(m.a,{span:14},H.a.createElement(u.a,{size:"small",className:B.a.colControl,placeholder:"\u5b57\u4f53",value:o,onChange:a.propChange(t,"fontFamily")},P.b)),H.a.createElement(m.a,{span:6},H.a.createElement(u.a,{size:"small",className:B.a.colControl,placeholder:"\u6587\u5b57\u5927\u5c0f",value:r,onChange:a.propChange(t,"fontSize")},P.c)),H.a.createElement(m.a,{span:4},H.a.createElement(_.a,{className:B.a.color,value:c,onChange:a.propChange(t,"fontColor")}))),H.a.createElement(d.a,{gutter:8,type:"flex",align:"middle",className:B.a.rowBlock},H.a.createElement(m.a,{span:12},H.a.createElement(u.a,{size:"small",className:B.a.colControl,value:l,onChange:a.propChange(t,"fontStyle")},P.d)),H.a.createElement(m.a,{span:12},H.a.createElement(u.a,{size:"small",className:B.a.colControl,value:i,onChange:a.propChange(t,"fontWeight")},P.e))))}},{title:"\u5bf9\u9f50",dataIndex:"justifyContent",key:"justifyContent",width:180,render:function(e,t){var n=t.style.justifyContent;return H.a.createElement(W,{size:"small",value:n,onChange:a.propChange(t,"justifyContent")},U,X,q)}}]),T(Y(a),"modalFooter",[H.a.createElement(x.a,{key:"cancel",size:"large",onClick:a.cancel},"\u53d6 \u6d88"),H.a.createElement(x.a,{key:"submit",size:"large",type:"primary",onClick:a.save},"\u4fdd \u5b58")]),T(Y(a),"tableRowSelection",{hideDefaultSelections:!0,onChange:function(e){a.setState({currentSelectedKeys:e})}});var o=Object(I.fromJS)(e.config).toJS(),c=z(a.getMapHeaderKeyAndConfig(o),2),l=c[0],i=c[1];return a.state={localConfig:o,currentEditingConfig:null,mapHeader:l,mapHeaderParent:i,currentSelectedKeys:[]},a}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,H.a.PureComponent),a=t,(n=[{key:"componentWillReceiveProps",value:function(e){if(e.config!==this.props.config){var t=Object(I.fromJS)(e.config).toJS(),a=z(this.getMapHeaderKeyAndConfig(t),2),n=a[0],r=a[1];this.setState({localConfig:t,mapHeader:n,mapHeaderParent:r,currentSelectedKeys:[]})}}},{key:"getMapHeaderKeyAndConfig",value:function(e){var t=this,a={},n={};return e.forEach(function(e){return t.traverseHeaderConfig(e,null,function(e,t){return a[e.key]=e,n[e.key]=t,!1})}),[a,n]}},{key:"traverseHeaderConfig",value:function(e,t,a){var n=this,r=a(e,t);return r||(r=Array.isArray(e.children)&&e.children.some(function(t){return n.traverseHeaderConfig(t,e,a)}))}},{key:"render",value:function(){var e,t=this.props.visible,a=this.state,n=a.localConfig,r=a.currentSelectedKeys,o=Q({},this.tableRowSelection,{selectedRowKeys:r}),l=O()((T(e={},B.a.rows,!0),T(e,K.a.headerTable,!0),e));return H.a.createElement(c.a,{title:"\u8868\u5934\u6837\u5f0f\u4e0e\u5206\u7ec4",width:1e3,maskClosable:!1,footer:this.modalFooter,visible:t,onCancel:this.cancel,onOk:this.save},H.a.createElement("div",{className:B.a.rows},H.a.createElement(d.a,{gutter:8,className:B.a.rowBlock,type:"flex",align:"middle"},H.a.createElement(m.a,{span:4},H.a.createElement(x.a,{type:"primary",onClick:this.mergeColumns},"\u5408\u5e76")),H.a.createElement(m.a,{span:19},H.a.createElement(d.a,{gutter:8,type:"flex",justify:"end",align:"middle"},H.a.createElement(J,null,H.a.createElement(x.a,{onClick:this.moveUp},$,"\u4e0a\u79fb"),H.a.createElement(x.a,{onClick:this.moveDown},"\u4e0b\u79fb",ee)))),te)),H.a.createElement("div",{className:l},H.a.createElement(d.a,{gutter:8,className:B.a.rowBlock},H.a.createElement(m.a,{span:24},H.a.createElement(i.a,{bordered:!0,pagination:!1,columns:this.columns,dataSource:n,rowSelection:o})))))}}])&&M(a.prototype,n),r&&M(a,r),t}();t.default=ae}}]);